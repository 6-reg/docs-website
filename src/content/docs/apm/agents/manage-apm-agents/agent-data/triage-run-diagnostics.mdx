---
title: Triage and run diagnostics in eight clicks
tags:
  - APM
  - Triage
  - Diagnostics
metaDescription: Use our application monitoring tools to quickly triage and run diagnostics during an incident.
---
import apmCheckoutServiceinApm from 'images/apm_screenshot-full_checkout-service-in-apm.png'

import apmTimePickerinApm from 'images/apm_screenshot-full_time-picker-in-apm.png'

import accountsSelectSlowestTransaction from 'images/accounts_screenshot-crop_select-slowest-transaction.gif'

import apmInvestigateThroughputinAPM from 'images/apm_screenshot-full_investigate-throughput-in-APM.gif'

import apmTransactionDetailsPage from 'images/apm_screenshot-crop_Transaction-details-page.png'

import apmTransactionBreakdown from 'images/apm_screenshot-crop_transaction-breakdown.png'

import apmThroughputTransactionsDetailsPage from 'images/apm_screenshot-crop_throughput-transactions-details-page.gif'

import apmTraceDetails from 'images/apm_screenshot-crop_trace-details.png'

import apmTransactionTracesinAPM from 'images/apm_screenshot-full_transaction-traces-in-APM.gif'

import apmTransactionsTabinApmOverview from 'images/apm_screenshot-full_transactions-tab-in-apm-overview.gif'


We all know what it's like to wake up in the morning to a ping from your leadership team telling you that something is going wrong and they need it fixed as soon as possible. This is where our APM tools come in. When you have limited time and increased urgency, you can use APM to run diagnostics and triage issues in eight clicks. 

For this example, we're going to explore a situation where you work for an e-commerce company and you manage the checkout team. You are alerted to the fact that the `Pay now` button is failing and customers can't checkout. 

<Steps>

<Step>
### Open APM [#open-apm]
Go to **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > All capabilities > APM and services**.

From there, click on the application that's causing the `Pay Now` button to fail. For this example, the app will be called `Checkout-service`.

<img
    title="APM summary page for checkout service"
    alt="A screenshot showing the APM summary page"
    src={apmCheckoutServiceinApm}
/>
</Step>

<Step>

### Select a time period [#time-picker]

It's important to make sure that you are looking at the right time segment. Based on the message you got from your leadership team, you know the checkout issues are happening now and so you want to hone in on what's actively happening in your system. Click on the **Time Picker** in the top-left, and select **Since 30 minutes ago**.

    <img
    title="Time picker in APM"
    alt="A screenshot that demonstrates how to select the time period for APM"
    src={apmTimePickerinApm}
/>
</Step>

<Step>

### Find the problematic transaction [#transactions]

You know that checkout is failing in your app but you're unsure of what's causing the actual error. In order to figure out what part of the checkout process is breaking you need to investigate your apps `Transactions`. A transaction represents the “work” that happens from when your application receives a request to when it sends a response. In order to determine which transaction is breaking, click on the **Transactions** tab.

A slow transaction can be a strong indicator that something is behaving abnormally, so digging deeper into your slowest transaction is a good place to start. Once you click into **Transactions** you will see a list of all the "work" that is happening behind the scenes for your `checkout-service` application. On the left-hand side you will see which transaction is taking the most time. For the purpose of this example, the slowest transaction is `Sinatra/Rubytron/POST #purchaseCart.` Click on the transaction.

<img
    title="transactions tab in APM summary "
    alt="A gif showing you how to dive deep into transactions"
    src={apmTransactionsTabinApmOverview}
/>

</Step>

<Step>
### Dig deeper into your slowest transaction [#slow-transactions]

Each transaction is comprised of many different units of "work." The **Transactions detail** page provides a holistic view of a single transaction by breaking it down into individual pieces of "work". The histogram on top visually demonstrates which pieces of the transaction are responding slower than others. 

For the `Sinatra/Rubytron/POST #purchaseCart` transaction there are many different areas where the transaction could be failing: databases, servers, controllers, and middleware, for example. You can toggle between each different segment of the transaction to identify trends and spikes.

In this case, the controller, `Sinatra/Rubytron/POST` is the slowest segment and is taking 59.83% of the transactions total time. 

    <img
    title="Slowest transaction"
    alt="A gif that demonstrates how to select the slowest transaction"
    src={accountsSelectSlowestTransaction}
/>

</Step>

<Step>
### Take a look at throughput 

While looking at response time for this transaction, you can also investigate throughput. Throughput is a way to measure the amount of work your application is handling. 

Since you're experiencing a spike in errors in the `checkout-service` application and the `Sinatra/Rubytron/POST #purchaseCart` transaction, it's helpful to compare those errors with your throughput results. 

If your throughput is very high during a time of service degradation it could indicate that your application is processing more work than it can handle. On the other hand, low throughput could indicate that your app isn't handling very many requests. This could simply mean that it's not used very much or it could mean that a service upstream that calls to your application is broken and requests aren't being processed. 

<img
    title="investigate throughput"
    alt="A gif that shows you how to investigate throughput in the transaction details page"
    src={apmInvestigateThroughputinAPM}
/>

</Step>

<Step>

### Investigate your transaction breakdown

The transaction breakdown refers to the detailed breakdown of the time spent on each operation within a specific transaction. This breakdown helps developers understand the performance of the application and identify bottlenecks or areas for improvement.

You can sort the transaction breakdown by **Category**, **% Time**, **Avg Calls/Txn**, and **Avg Time**. We recommend sorting by **% Time** to understand which piece of the transaction is taking up the most time within each transaction. 

Let's examine the sections of the **Breakdown table** in the screenshot below:

* **Category** refers to the type of call segment being monitored. 
* **Controller** is a type of **category** that refers to model-view-controller architecture and is most likely a call made directly from your UI to your application. 
* **External** is a type of **category** that represents a call being made that we began monitoring before we know where it's going.  
* **Middleware** is a type of **category** that most often refers to a dependency or library that is being used as part of your application's functionality. 
* **Segment** consists of the name of the function and call segment being monitored.
* **% Time** refers to the percentage of time each specific segment takes of the total transaction lifecycle. It's important to remember that some segments wait until all the other segments are completed before they're completed. In the screenshot below, the `Controller` segment is what is initiating the `POST` call, which means that all the other transactions are _nested_ within the `POST` call, which could be why it's taking longer than all the others. 
* **Avg Calls/Txn** is the amount of times that the segment is called per transaction. 
* **Avg Time** is the average time that a particular segment took to complete. It's important to keep in mind that there could be asynchronous work happening. One segment could be ongoing and then other, nested work, is being done at the same time. 

Once you sort the **Breakdown table**, you can click on any problematic transactions. 

<img
    title="screenshot breakdown"
    alt="A screenshot depicting the transaction breakdown "
    src={apmTransactionBreakdown}
/>
</Step>

<Step>
### Explore transaction traces

When your customers are trying to purchase something on your site and they use the `Pay Now` button, the `checkout-service` application generates multiple database queries, API calls, and other interactions with the underlying infrastructure. Transaction traces keep a record of every interaction between `checkout-service` and your customers. 

Transaction traces can provide a wealth of information, including:

    * The time spent on each segment of a transaction, such as database queries, external API calls, or rendering of HTML pages.
    * The parameters passed to each segment of a transaction, allowing developers to identify specific data that may be causing issues.
    * Information about errors or exceptions that occurred during a transaction.
    * Information about the overall performance of the application, such as response times and throughput.


<img
    title="transaction traces in APM"
    alt="A gif that displays transaction traces for a transaction"
    src={apmTransactionTracesinAPM}
/>

</Step>

<Step>
### Take a look at trace details 

<img
    title="Trace details"
    alt="A screenshot showing trace details for a transaction trace"
    src={apmTraceDetails}
/>

</Step>
<Step>
And now you have all the information you need to fix the `Pay Now` button for your application. 

* You know which transaction is causing the service degradation `Sinatra/Rubytron/POST #purchaseCart`.
* You know when the problem started
* You know which piece of the transaction is causing the breakdown in service. You and your team can now start fixing the origin of the problem and get your checkout up-and-running as quickly as possible. 
</Step>
</Steps>














